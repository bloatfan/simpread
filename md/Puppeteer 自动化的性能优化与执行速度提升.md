> æœ¬æ–‡ç”± [ç®€æ‚¦ SimpRead](http://ksria.com/simpread/) è½¬ç ï¼Œ åŸæ–‡åœ°å€ [github.com](https://github.com/biaochenxuying/blog/issues/69)

![](https://raw.githubusercontent.com/lslz627/PicGo/master/68747470733a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f31323839303831392d346331323931636430306539333434362e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)
--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------

å‰è¨€
--

æœ€è¿‘éšç€å¤æ‚çš„è‡ªåŠ¨åŒ–ä»»åŠ¡çš„å¢åŠ ï¼Œrobot é¡¹ç›®å‡ºç°äº†å¾ˆå¤šé—®é¢˜ï¼Œç»å¸¸è¦äººå·¥æ™ºèƒ½ï¼Œåœ¨ä¸Šæ¬¡æ¸…è¿œæ¼‚æµçš„æ—¶å€™ï¼Œå°±æ˜¯ç»å¸¸æŠ¥è­¦ï¼Œè€Œä¸”åŸºæœ¬éƒ½æ˜¯æˆ‘äººå·¥æ™ºèƒ½è§£å†³çš„ï¼Œå‰å®³å§ ğŸ¤©ã€‚

![](https://raw.githubusercontent.com/lslz627/PicGo/master/68747470733a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f31323839303831392d646266613637366232316264663561332e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)

è¿™äº›é—®é¢˜åŒ…æ‹¬ï¼š**ç»å¸¸å¡ä½ï¼Œè¿è¡Œæ…¢ã€å¡ï¼Œæµè§ˆå™¨å…³ä¸æ‰ï¼ŒCPU å’Œ å†…å­˜ ç»å¸¸æ˜¯æ»¡è½½è¿è¡Œçš„ï¼Œç‰¹åˆ«æ˜¯ CPU ï¼Œç»å¸¸æ˜¯ 99% çš„ä½¿ç”¨ç‡ã€‚**

Chromium æ¶ˆè€—æœ€å¤šçš„èµ„æºæ˜¯ CPUï¼Œä¸€æ˜¯æ¸²æŸ“éœ€è¦å¤§é‡è®¡ç®—ï¼ŒäºŒæ˜¯ Dom çš„è§£æä¸æ¸²æŸ“åœ¨ä¸åŒçš„è¿›ç¨‹ï¼Œè¿›ç¨‹é—´åˆ‡æ¢ä¼šç»™ CPU é€ æˆå‹åŠ›ï¼ˆè¿›ç¨‹å¤šäº†ä¹‹åç‰¹åˆ«æ˜æ˜¾ï¼‰ã€‚

å…¶æ¬¡æ¶ˆè€—æœ€å¤šçš„æ˜¯å†…å­˜ï¼ŒChromium æ˜¯ä»¥å¤šè¿›ç¨‹çš„æ–¹å¼è¿è¡Œï¼Œä¸€ä¸ªé¡µé¢ä¼šç”Ÿæˆä¸€ä¸ªè¿›ç¨‹ï¼Œä¸€ä¸ªè¿›ç¨‹å ç”¨ 30M å·¦å³çš„å†…å­˜ï¼Œå¤§è‡´ä¼°ç®— 1000 ä¸ªè¯·æ±‚å ç”¨ 30G å†…å­˜ï¼Œåœ¨å¹¶å‘é«˜çš„æ—¶å€™å†…å­˜ç“¶é¢ˆæœ€å…ˆæ˜¾ç°ã€‚

ä¼˜åŒ–æœ€ç»ˆä¼šè½åœ¨å†…å­˜å’Œ CPU ä¸Šï¼ˆæ‰€æœ‰è½¯ä»¶çš„ä¼˜åŒ–æœ€ç»ˆéƒ½è¦è½åˆ°è¿™é‡Œï¼‰ï¼Œé€šå¸¸æ¥è¯´å› ä¸ºå¹¶å‘é€ æˆçš„ç“¶é¢ˆéœ€è¦ä¼˜åŒ–å†…å­˜ï¼Œè®¡ç®—é€Ÿåº¦æ…¢çš„é—®é¢˜è¦ä¼˜åŒ– CPUã€‚

æ‰€ä»¥è¿™ç¯‡æ–‡ç« ï¼Œæˆ‘ä»¬è°ˆè°ˆå¦‚ä½•ä¼˜åŒ– Puppeteer çš„æ€§èƒ½ä¼˜åŒ–ä¸æ‰§è¡Œé€Ÿåº¦ã€‚

> `Headless Chrome`Â ï¼Œæ— å¤´æ¨¡å¼ï¼Œæµè§ˆå™¨çš„æ— ç•Œé¢å½¢æ€ï¼Œå¯ä»¥åœ¨ä¸æ‰“å¼€æµè§ˆå™¨çš„å‰æä¸‹ï¼Œåœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œæµ‹è¯•è„šæœ¬ï¼Œèƒ½å¤Ÿå®Œå…¨åƒçœŸå®æµè§ˆå™¨ä¸€æ ·å®Œæˆç”¨æˆ·æ‰€æœ‰æ“ä½œï¼Œä¸ç”¨æ‹…å¿ƒè¿è¡Œæµ‹è¯•è„šæœ¬æ—¶æµè§ˆå™¨å—åˆ°å¤–ç•Œçš„å¹²æ‰°ï¼Œä¹Ÿä¸éœ€è¦å€ŸåŠ©ä»»ä½•æ˜¾ç¤ºè®¾å¤‡ï¼Œä½¿è‡ªåŠ¨åŒ–æµ‹è¯•æ›´ç¨³å®šã€‚

ä¼˜åŒ–ç‚¹
---

### ä¼˜åŒ– Chromium å¯åŠ¨é¡¹

1.  å¦‚æœå°† Dom è§£æå’Œæ¸²æŸ“æ”¾åˆ°åŒä¸€è¿›ç¨‹ï¼Œè‚¯å®šèƒ½æå‡æ—¶é—´ï¼ˆè¿›ç¨‹ä¸Šä¸‹æ–‡åˆ‡æ¢çš„æ—¶é—´ï¼‰ã€‚å¯¹åº”çš„é…ç½®æ˜¯ `single-process`
2.  éƒ¨åˆ†åŠŸèƒ½ disable æ‰ï¼Œæ¯”å¦‚ GPUã€Sandboxã€æ’ä»¶ç­‰ï¼Œå‡å°‘å†…å­˜çš„ä½¿ç”¨å’Œç›¸å…³è®¡ç®—ã€‚

ä»£ç å¦‚ä¸‹ï¼š

```
const browser = await puppeteer.launch(
{
	headless:true,
	args: [
  â€˜â€“disable-gpuâ€™, // GPUç¡¬ä»¶åŠ é€Ÿ
  â€˜â€“disable-dev-shm-usageâ€™, // åˆ›å»ºä¸´æ—¶æ–‡ä»¶å…±äº«å†…å­˜
  â€˜â€“disable-setuid-sandboxâ€™, // uidæ²™ç›’
  â€˜â€“no-first-runâ€™, // æ²¡æœ‰è®¾ç½®é¦–é¡µã€‚åœ¨å¯åŠ¨çš„æ—¶å€™ï¼Œå°±ä¼šæ‰“å¼€ä¸€ä¸ªç©ºç™½é¡µé¢ã€‚
  â€˜â€“no-sandboxâ€™, // æ²™ç›’æ¨¡å¼
  â€˜â€“no-zygoteâ€™,
  â€˜â€“single-processâ€™ // å•è¿›ç¨‹è¿è¡Œ
	]
});
```

### ä¼˜åŒ– Chromium æ‰§è¡Œæµç¨‹

æ¥ä¸‹æ¥æˆ‘ä»¬å†å•ç‹¬ä¼˜åŒ– Chromium å¯¹åº”çš„é¡µé¢ã€‚

æ¯æ¬¡è¯·æ±‚éƒ½å¯åŠ¨ Chromiumï¼Œå†æ‰“å¼€ tab é¡µï¼Œè¯·æ±‚ç»“æŸåå†å…³é—­ tab é¡µä¸æµè§ˆå™¨ã€‚

æµç¨‹å¤§è‡´å¦‚ä¸‹ï¼š

**è¯·æ±‚åˆ°è¾¾ -> å¯åŠ¨ Chromium -> æ‰“å¼€ tab é¡µ -> è¿è¡Œä»£ç  -> å…³é—­ tab é¡µ -> å…³é—­ Chromium -> è¿”å›æ•°æ®**

çœŸæ­£è¿è¡Œä»£ç çš„åªæ˜¯ tab é¡µé¢ï¼Œç†è®ºä¸Šå¯åŠ¨ä¸€ä¸ª Chromium ç¨‹åºèƒ½è¿è¡Œæˆåƒä¸Šä¸‡çš„ tab é¡µï¼Œå¯ä¸å¯ä»¥å¤ç”¨ Chromium åªæ‰“å¼€ä¸€ä¸ª tab é¡µç„¶åå…³é—­å‘¢ï¼Ÿ

å½“ç„¶æ˜¯å¯ä»¥çš„ï¼ŒPuppeteer æä¾›äº† puppeteer.connect() æ–¹æ³•ï¼Œå¯ä»¥è¿æ¥åˆ°å½“å‰æ‰“å¼€çš„æµè§ˆå™¨ã€‚

æµç¨‹å¦‚ä¸‹ï¼š

**è¯·æ±‚åˆ°è¾¾ -> è¿æ¥ Chromium -> æ‰“å¼€ tab é¡µ -> è¿è¡Œä»£ç  -> å…³é—­ tab é¡µ -> è¿”å›æ•°æ®**

ä»£ç å¦‚ä¸‹ï¼š

```
const MAX_WSE = 4;  //å¯åŠ¨å‡ ä¸ªæµè§ˆå™¨ 
let WSE_LIST = []; //å­˜å‚¨browserWSEndpointåˆ—è¡¨
init();
app.get('/', function (req, res) {
    let tmp = Math.floor(Math.random()* MAX_WSE);
    (async () => {
        let browserWSEndpoint = WSE_LIST[tmp];
        const browser = await puppeteer.connect({browserWSEndpoint});
        const page = await browser.newPage();
        await page.goto('file://code/screen/index.html');
        await page.setViewport({
            width: 600,
            height: 400
        });     
        await page.screenshot({path: 'example.png'});
        await page.close();
        res.send('Hello World!');
    })();
});
function init(){
    (async () => {
        for(var i=0;i<MAX_WSE;i++){
            const browser = await puppeteer.launch({headless:true,
                args: [
                '--disable-gpu',
                '--disable-dev-shm-usage',
                '--disable-setuid-sandbox',
                '--no-first-run',
                '--no-sandbox',
                '--no-zygote',
                '--single-process'
            ]});
            browserWSEndpoint = await browser.wsEndpoint();
            WSE_LIST[i] = browserWSEndpoint;
        }
        console.log(WSE_LIST);
    })();   
}
```

ç¨‹åºå¯åŠ¨æ—¶ï¼ˆä½¿ç”¨ Express æä¾› Web æ¥å£ï¼‰ï¼Œåˆå§‹åŒ–ä¸€å®šæ•°é‡çš„æ— å¤´æµè§ˆå™¨ï¼Œå¹¶ä¿å­˜ `WSEndpoint` åˆ—è¡¨ï¼Œå½“æ”¶åˆ°è¯·æ±‚æ—¶ï¼Œé€šè¿‡éšæœºæ•°åšç®€å•çš„è´Ÿè½½å‡è¡¡ï¼ˆåˆ©ç”¨å¤šæ ¸ç‰¹æ€§ï¼‰ã€‚

ä½¿ç”¨ tab æ–¹å¼æ¸²æŸ“åè¯·æ±‚é€Ÿåº¦æå‡äº† 200ms å·¦å³ï¼Œä¸€ä¸ª tab è¿›ç¨‹ä½¿ç”¨å†…å­˜é™åˆ° 20M ä»¥å†…ï¼Œå¸¦æ¥çš„æ”¶ç›Šä¹Ÿéå¸¸å¯è§‚ã€‚

ä¸è¿‡è¿™é‡Œè¦æ³¨æ„ï¼Œå®˜æ–¹å¹¶ä¸å»ºè®®è¿™æ ·åšï¼Œ**å› ä¸ºä¸€ä¸ª tab é¡µé˜»å¡æˆ–è€…å†…å­˜æ³„éœ²ä¼šå¯¼è‡´æ•´ä¸ªæµè§ˆå™¨é˜»å¡å¹¶ Crash**ã€‚ä¸‡å…¨çš„è§£å†³åŠæ³•æ˜¯å®šæœŸé‡å¯ç¨‹åºï¼Œ**å½“è¯·æ±‚ 1000 æ¬¡æˆ–è€…å†…å­˜è¶…è¿‡é™åˆ¶åé‡å¯å¯¹åº”çš„è¿›ç¨‹**ã€‚

å…¶å®è¿™ä¸ªæ–¹æ³•å¹¶ä¸é€‚ç”¨äºæˆ‘ä»¬çš„ robot é¡¹ç›®ï¼Œå› ä¸º ä»£ç†ã€æµè§ˆå™¨æŒ‡çº¹ ç­‰ä¿¡æ¯ï¼Œå¾ˆéš¾åœ¨ä¸€ä¸ªæµè§ˆå™¨é‡Œé¢åšåˆ°å®Œå…¨éš”ç¦»ï¼Œå¦‚æœè¦éš”ç¦»ï¼Œè¦å†™å¾ˆå¤šçš„ä»£ç æ¥åˆ é™¤ç¼“å­˜ã€é…ç½®ç­‰ æ¥åŒºåˆ†ç¯å¢ƒæ‰è¡Œã€‚

ä¹‹æ‰€ä»¥è®²å‡ºæ¥ï¼Œå¦‚æœåé¢æœ‰é¡¹ç›®æ˜¯ä¸“é—¨åšçˆ¬è™«æ¥é‡‡é›†æ•°æ®ã€ä¿¡æ¯çš„ï¼Œå¯èƒ½å¯ä»¥ç”¨å¾—ä¸Šã€‚

### é¡µé¢ä¼˜åŒ–

æµè§ˆå™¨æ‰“å¼€çš„é¡µé¢æ•°é‡è¶Šå¤šï¼Œå ç”¨çš„å†…å­˜å°±è¶Šå¤šï¼Œå’Œæˆ‘ä»¬å¹³æ—¶ä½¿ç”¨æµè§ˆå™¨æ˜¯ä¸€æ ·çš„åŸç†çš„ã€‚

ä½†æ˜¯ robot é¡¹ç›®é‡Œé¢æœ‰å‡ ä¸ªä»»åŠ¡æ˜¯æ‰“å¼€å¤šä¸ª æ ‡ç­¾é¡µé¢ æ¥åšä»»åŠ¡çš„ï¼Œæ¯”å¦‚ ç»‘å®šè´§å¸ã€æ£€æŸ¥ç»„åˆã€‚

1.  tab é¡µå¤šå¿…ç„¶ä¼šå¡ï¼Œæ‰€ä»¥å¿…é¡»æœ‰æ•ˆæ§åˆ¶ tab é¡µä¸ªæ•°ã€‚
    
2.  æµè§ˆå™¨æ‰“å¼€æ—¶ä¼šé»˜è®¤æœ‰ä¸€ä¸ª page é¡µé¢ï¼Œç›´æ¥åˆ©ç”¨è¯¥é¡µé¢èƒ½å‡å°‘ 1/3 å·¦å³çš„å†…å­˜æ¶ˆè€—ã€‚
    
3.  å¦‚æœè¦æ‰“å¼€å¤šä¸ªé¡µé¢æ¥æ‰§è¡Œä»»åŠ¡æ—¶ï¼Œæ‰“å¼€çš„é¡µé¢æ‰§è¡Œå®Œä»»åŠ¡ä¹‹åï¼Œæœ€å¥½æŠŠå…¶å…³é—­ï¼Œå‡å°‘å†…å­˜çš„å ç”¨ã€‚
    

### åœºæ™¯åŠæ•°æ®åˆ†æ

å› ä¸º FB å˜åŒ–å¤šç«¯ï¼Œæœ‰å¾ˆå¤šçš„åœºæ™¯ï¼Œè€Œä¸”æœ‰æ—¶å€™åœºæ™¯çš„å…ƒç´ é‡å äº†ï¼Œå¯¼è‡´ç¨‹åºè·‘é”™æµç¨‹ï¼Œæ‰€ä»¥ä»£ç å†™äº†å¾ˆå¤šç§åœºæ™¯çš„åˆ¤æ–­ï¼Œè€Œä¸”æœ‰æ—¶å€™çœ‹åˆ°éƒ½è§‰å¾—æ— è¯­ã€‚

![](https://raw.githubusercontent.com/lslz627/PicGo/master/68747470733a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f31323839303831392d353465353261313166326133303136662e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)

è€Œä¸”æœ‰äº›åœºæ™¯éƒ½ä¸ç”¨äº†ï¼Œæˆ‘ä»¬ä¹Ÿä¸çŸ¥é“ï¼Œæ—§åœºæ™¯çš„ä»£ç è¿˜ç•™åœ¨ç¨‹åºé‡Œé¢äº†ã€‚

æ‰€ä»¥æˆ‘è§‰å¾—è¦åšä¸ª**åœºæ™¯çš„ç»Ÿè®¡æ‰è¡Œï¼Œæ¯è¿‡ä¸€ä¸¤ä¸ªæœˆçœ‹ä¸‹æ•°æ®ï¼ŒæŠŠä¸ç”¨çš„åœºæ™¯çš„ä»£ç åˆ æ‰**ã€‚

åˆšå¥½æˆ‘ä»¬ä¸Šä¼ æ—¥å¿—çš„ **Kibana** ä¹Ÿå³æ˜¯ elk é‚£ä¸ªå¹³å°å°±æœ‰è¿™ä¸ªåŠŸèƒ½ï¼Œå¯ä»¥æå¾ˆå¤šçš„æŠ¥è¡¨åˆ†æï¼Œä»£ç ä¹Ÿä¸ç”¨ä¿®æ”¹ï¼Œåªåˆ†æä¸€ä¸‹é‚£ä¸ªæ—¥å¿—å°±è¡Œã€‚

è¿˜å¯ä»¥ **åˆ†æ FB çš„æ–°ç‰ˆä¸æ—§ç‰ˆçš„ç°åº¦é‡**ï¼Œå†³å®šå¤„ç†å¼‚å¸¸çš„ä¼˜å…ˆåº¦ã€‚

ä»¥æ­¤ç±»æ¨ï¼Œå…¶ä»–é¡¹ç›®ç»“åˆå…·ä½“çš„åœºæ™¯ï¼Œåº”è¯¥ä¹Ÿå¯ä»¥é‡‡ç”¨è¿™ä¸ªæ–¹æ³•ï¼Œæ¯”å¦‚ web é¡¹ç›®æœ‰äº›åœºæ™¯çš„æ—¥å¿—ã€‚

Kibana åŠŸèƒ½å…¶å®å¾ˆå¼ºå¤§çš„ï¼Œä¹‹å‰éƒ½ä¸çŸ¥é“ï¼Œå¾€åè¿˜æ˜¯è¦å­¦ä¹ ä¸€ä¸‹è¿™ä¸ªäº§å“æ‰è¡Œã€‚

![](https://raw.githubusercontent.com/lslz627/PicGo/master/68747470733a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f31323839303831392d353530346561326332396466663737622e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)

### æ¤å…¥ javascript ä»£ç 

iframe è¾ƒå¤šæ—¶ï¼Œæµè§ˆå™¨ç»å¸¸å¡åˆ°æ— æ³•è¿è¡Œï¼Œæ‰€ä»¥å¯ä»¥è€ƒè™‘åœ¨ä»£ç é‡ŒåŠ äº†åˆ é™¤æ— ç”¨ iframe çš„è„šæœ¬ã€‚

ä¸è¿‡ï¼Œè¿™å„æƒ…å†µï¼Œåœ¨ robot é¡¹ç›®é‡Œé¢é‡åˆ°çš„ä¸å¤šã€‚

```
(async () => {
    const browser = await puppeteer.launch();
    const page = await browser.newPage();
    await page.goto('https://webmail.vip.188.com');
    //æ³¨å†Œä¸€ä¸ª Node.js å‡½æ•°ï¼Œåœ¨æµè§ˆå™¨é‡Œè¿è¡Œ
    await page.exposeFunction('md5', text =>
        crypto.createHash('md5').update(text).digest('hex')
    );
    //é€šè¿‡ page.evaluate åœ¨æµè§ˆå™¨é‡Œæ‰§è¡Œåˆ é™¤æ— ç”¨çš„ iframe ä»£ç 
    await page.evaluate(async () =>  {
        let iframes = document.getElementsByTagName('iframe');
        for(let i = 3; i <  iframes.length - 1; i++){
            let iframe = iframes[i];
            if(iframe.name.includes("frameBody")){
                iframe.src = 'about:blank';
                try{
                    iframe.contentWindow.document.write('');
                    iframe.contentWindow.document.clear();
                }catch(e){}
                //æŠŠiframeä»é¡µé¢ç§»é™¤
                iframe.parentNode.removeChild(iframe);
            }
        }
        //åœ¨é¡µé¢ä¸­è°ƒç”¨ Node.js ç¯å¢ƒä¸­çš„å‡½æ•°
        const myHash = await window.md5('PUPPETEER');
        console.log(`md5 of ${myString} is ${myHash}`);
    });
    await page.close();
    await browser.close();
})();
```

### ä¼˜åŒ–é™æ€æ–‡ä»¶åŠ è½½

æˆ‘ä»¬åœ¨çˆ¬å–ç½‘ç«™çš„æ—¶å€™, ä¸€èˆ¬æ¯”è¾ƒå…³å¿ƒç½‘ç«™çš„åŠ è½½é€Ÿåº¦, è€Œé™åˆ¶åŠ è½½é€Ÿåº¦çš„å¤§å¤šæ•°æ˜¯é™æ€æ–‡ä»¶, åŒ…æ‹¬ css, font, imageã€‚

ä¸ºäº†ä¼˜åŒ–çˆ¬è™«æ€§èƒ½, æˆ‘ä»¬éœ€è¦é˜»æ­¢æµè§ˆå™¨åŠ è½½è¿™äº›ä¸å¿…è¦çš„æ–‡ä»¶, è¿™å¯ä»¥é€šè¿‡å¯¹è¯·æ±‚è¿›è¡Œæ‹¦æˆªæ¥å®ç°ã€‚

è€Œä¸”åšåˆ° **éšæœºæ‹¦æˆª** æ›´å¥½ä¸€ç‚¹ã€‚

```
await page.setRequestInterception(true);
page.on('request',  req => {
  if(['image', 'stylesheet', 'font'].includes(req.resourceType())) {
    return request.abort();
  }
  return request.continue();
});
```

### å¼€å‘è°ƒè¯•

*   puppeteer.launch(options)

devtools: true // æ˜¯å¦ä¸ºæ¯ä¸ªé€‰é¡¹å¡è‡ªåŠ¨æ‰“å¼€ DevTools é¢æ¿ï¼Œè¿™ä¸ªé€‰é¡¹åªæœ‰å½“ headless è®¾ç½®ä¸º false çš„æ—¶å€™æœ‰æ•ˆ *

å¼€å‘æ—¶ï¼Œå¯ä»¥é€šè¿‡ **ç¯å¢ƒå˜é‡** æ¥è®¾ç½®è‡ªåŠ¨æ‰“å¼€æ§åˆ¶å°ï¼Œä¸ç”¨æ¯æ¬¡æ‰‹åŠ¨æ‰“å¼€ï¼Œå‡å°‘æ“ä½œæ—¶é—´ã€‚

_![](https://raw.githubusercontent.com/lslz627/PicGo/master/68747470733a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f31323839303831392d613065646465366331613362616165392e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)_

### å¼€å¯ç¼“å­˜

```
--user-data-dir=${this.userDataDir}
```

è®¾ç½®ç”¨æˆ·æ•°æ®ç›®å½•ï¼Œç”¨æˆ·æ•°æ®ç›®å½•ï¼ˆUser Data Directoryï¼‰æ˜¯ Chrome / Chromium ç”¨æ¥å­˜æ”¾æˆ·æ’ä»¶ã€ä¹¦ç­¾å’Œ cookie ç­‰ä¿¡æ¯çš„æ–‡ä»¶å¤¹ã€‚

ç°åœ¨å·²ç»å¼€å‘äº†è¿™ä¸ªåŠŸèƒ½äº†çš„ï¼Œçº¿ä¸Šä»»åŠ¡æœºéƒ½è¿˜æ²¡ç”¨ä¸Šï¼Œåªæœ‰å¼€å‘ä»»åŠ¡æœºå’Œæœ¬åœ°å¼€å‘ä¸Šç”¨åˆ°è€Œå·²ã€‚

ä¸è¿‡å¼€å¯è¿™ä¸ªåŠŸèƒ½ä¼šè€—è´¹ç£ç›˜å†…å­˜ï¼Œè¦åŠ ä¸ªåŠŸèƒ½ï¼š**ç¼“å­˜è¾¾åˆ° 80% å·¦å³ï¼Œå°±è‡ªåŠ¨åˆ é™¤æœ¬åœ°çš„ç¼“å­˜**ã€‚

### é…ç½®ä¼˜åŒ–

ç°åœ¨çº¿ä¸Šçš„ä»»åŠ¡æœºå·²ç»æœ‰ 32 å°äº†ï¼Œè€Œä¸”ä»»åŠ¡æœºä¼šè¶Šæ¥è¶Šå¤šã€‚

å¦‚æœæŸå¤©è¦åŠ ä¸€ä¸ªç¯å¢ƒå˜é‡ä»€ä¹ˆçš„ï¼Œæˆ‘å°±è¦æ‰‹åŠ¨ä¿®æ”¹ 32 æ¬¡ï¼Œå¦‚æœå¢åŠ åˆ° 100 å°ä»»åŠ¡æœºï¼Œå°±æ›´ææ€–äº†ã€‚

æ‰€ä»¥è§‰å¾—æœ‰å¿…è¦æŠŠä¸€äº›é…ç½®æ”¾åœ¨ admin é‡Œé¢æ¥é…ç½®ï¼Œå¹¶ä¸”ç»Ÿä¸€ç®¡ç†ã€‚

è§‰å¾—ç°åœ¨æœ‰å¿…è¦åŠ åˆ° admin é…ç½®æœ‰ï¼š

1.  æ‰€æœ‰çš„ç¯å¢ƒå˜é‡ï¼šç”±ç»Ÿä¸€çš„ä¸€ä¸ªæ–‡ä»¶æˆ–è€…æ¥å£ç®¡ç†ã€‚
    
2.  è¿›ç¨‹æ•°é‡çš„é…ç½®ä¹Ÿç”±æ¥å£æ§åˆ¶ã€‚
    

è¿˜æœ‰ä¸€ç‚¹å°±æ˜¯ï¼šç°åœ¨ robot å‘ç‰ˆè¦ 8 åˆ†é’Ÿå·¦å³äº†ï¼Œä¹‹å‰æ˜¯ 2 åˆ†é’Ÿå·¦å³å°±èƒ½å‘å®Œçš„ï¼Œæ‰€ä»¥ä»»åŠ¡æœºçš„ç»´æŠ¤ä¹Ÿè¦é‡è§†äº†ã€‚

### æµè§ˆå™¨å…³ä¸æ‰

æœ€è¿‘å…³ä¸æ‰çš„æµè§ˆå™¨éƒ½æ˜¯è¿™ä¸ªæƒ…å†µçš„ï¼š

![](https://raw.githubusercontent.com/lslz627/PicGo/master/68747470733a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f31323839303831392d613136623565353738623664393039322e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)

åŸå› ï¼š911 ä»£ç†çš„ ip ç›¸åŒï¼Œç”¨çš„ç«¯å£ä¸åŒï¼Œå°±ä¼šå‡ºç° **This site canâ€™t be reached** æ²¡ç½‘ç»œï¼Œè¿˜æ‰£é’±ã€‚

è§£å†³æ–¹æ³•ï¼šç”¨æ–°çš„ä»£ç†æ–¹æ¡ˆå‡ºæ¥ä¹‹åï¼Œåº”è¯¥å°±ä¸ä¼šå‡ºç°äº†ã€‚æˆ–è€…å®šæ—¶è°ƒç”¨è„šæœ¬é‡å¯ robot ç¨‹åº (æ‰§è¡Œä»»åŠ¡è¶…è¿‡ 1000 æ¡ï¼Œæˆ–è€…æ²¡æœ‰æ‰§è¡Œä»»åŠ¡çš„æ—¶å€™)ã€‚

### 911 æ²¡ä»£ç†

è·å– 911 ä»£ç†çš„ä½™é¢ã€æ²¡æœ‰ä»£ç†æ—¶ï¼Œæš‚åœæ‹‰å–ä»»åŠ¡ï¼Œ15 åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡ï¼Œè¿˜æ˜¯æ²¡æœ‰ä»£ç†å°±è¿›è¡ŒæŠ¥è­¦ã€‚

### å¹³æ»‘é‡å¯ robot

robot å¯åŠ¨è¶…è¿‡ 24 å°æ—¶ï¼Œä¸”å†æ²¡æœ‰æ‹‰å–åˆ°ä»»åŠ¡æ—¶ï¼Œrobot è°ƒç”¨è„šæœ¬æ¥é‡å¯ robotã€‚

ä¹‹å‰æƒ³é€šè¿‡ å®šæ—¶æ£€æŸ¥ CPU å’Œ å†…å­˜ï¼Œè¿‡é«˜çš„æ¬¡æ•°è¶…è¿‡ä¸€å®šå€¼æˆ–è€… robot å¼€å¯çš„çŠ¶æ€è¶…è¿‡ä¸€å®šæ—¶é—´ï¼Œå°±é‡å¯ robot çš„ï¼Œä½†æ˜¯å‘ç° CPU å’Œ å†…å­˜ç»å¸¸æ˜¯å¾ˆé«˜çš„ï¼Œæ‰€ä»¥ä¸å¤ªå¯è¡Œã€‚

æƒ³è¦ä¼˜åŒ–çš„ç‚¹
------

### åœºæ™¯çš„é‡ç°

robot æœ€è€—æ—¶çš„å°±æ˜¯åœºæ™¯çš„é‡ç°ï¼Œå¾€å¾€éƒ½æ˜¯è¦æ‰¾åˆ°ç‰¹å®šçš„å·ï¼Œå»åˆ°ç‰¹å®šçš„é¡µé¢ä½ç½®ï¼Œæ‰èƒ½è¡¥å¥½åœºæ™¯çš„ã€‚

ä¹‹å‰æƒ³è¿‡ï¼Œrobot å‡ºç°æœªçŸ¥é”™è¯¯æ—¶ï¼Œå°±ä¿å­˜ htmlã€jsã€css ç­‰æ–‡ä»¶ï¼Œç‰¹å®šçš„å…ƒç´ æ˜¯ä¿ç•™ä¸‹æ¥äº†ï¼Œä½†æ˜¯å› ä¸ºç‰¹å®šçš„è´¦å·æ²¡æœ‰ç™»å½•ï¼Œä¸€æ‰“å¼€ html æ–‡ä»¶æ—¶ï¼Œæ˜¯é‡ç°ä¸äº†ç‰¹å®šçš„åœºæ™¯çš„ï¼Œè¡¥ä¸äº†åœºæ™¯ã€‚

è¿™ä¸ªæš‚æ—¶æ²¡è§£å†³æ–¹æ³•ã€‚

æœ€å
--

ä¹‹æ‰€ä»¥åˆ†äº«è¿™ä¸ªå†…å®¹ï¼Œæœ€è¿‘äººå·¥æ™ºèƒ½çš„æ“ä½œçœŸçš„æœ‰ç‚¹å¤šï¼Œå“ˆå“ˆå“ˆã€‚

æ‰€ä»¥æƒ³é›†æ€å¹¿ç›Šï¼Œå¾—åˆ°æ›´å¤šã€æ›´å¥½çš„ä¼˜åŒ–æ–¹æ³•ï¼Œæå‡ robot é¡¹ç›®çš„å¼€å‘ä¸ç»´æŠ¤å·¥ä½œã€‚

æ‰€ä»¥å¤§ä½¬ä»¬ï¼Œå¦‚æœæœ‰æ›´å¥½çš„å»ºè®®ï¼Œè¯·æå‡ºæ¥ï¼Œå“ˆå“ˆå“ˆ ğŸ˜‰ã€‚

[![](https://raw.githubusercontent.com/lslz627/PicGo/master/68747470733a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f31323839303831392d663165663439663361616166623737622e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)](https://camo.githubusercontent.com/3713f51c46ef939c309ac94d5586a1cdeefcabe180f1dcadec5ce3f25c21a89b/68747470733a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f31323839303831392d663165663439663361616166623737622e706e673f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970253743696d61676556696577322f322f772f31323430)

 ![](https://raw.githubusercontent.com/lslz627/PicGo/master/68747470733a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f31323839303831392d656132366263373761613563653932322e6769663f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970) [ ![](https://raw.githubusercontent.com/lslz627/PicGo/master/68747470733a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f31323839303831392d656132366263373761613563653932322e6769663f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970) ](https://camo.githubusercontent.com/fcf804d653752581bb6c6c984f4a0d5da6326c7f0595ae3ce68e10dcc2fe24cf/68747470733a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f31323839303831392d656132366263373761613563653932322e6769663f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970)   [](https://camo.githubusercontent.com/fcf804d653752581bb6c6c984f4a0d5da6326c7f0595ae3ce68e10dcc2fe24cf/68747470733a2f2f75706c6f61642d696d616765732e6a69616e7368752e696f2f75706c6f61645f696d616765732f31323839303831392d656132366263373761613563653932322e6769663f696d6167654d6f6772322f6175746f2d6f7269656e742f7374726970) 

**å‚è€ƒæ–‡ç« ä¸å¥½æ–‡ç« **

*   [Puppeteer æ€§èƒ½ä¼˜åŒ–ä¸æ‰§è¡Œé€Ÿåº¦æå‡](https://blog.it2048.cn/article-puppeteer-speed-up/)
*   [æ— å¤´æµè§ˆå™¨æ€§èƒ½å¯¹æ¯”ä¸ Puppeteer çš„ä¼˜åŒ–æ–‡æ¡£](https://blog.it2048.cn/article-headless-puppeteer/)
*   [playwright](https://github.com/microsoft/playwright)
*   [è·¨å¹³å°çš„æµè§ˆå™¨è‡ªåŠ¨åŒ–å·¥å…· Playwright ç®€æ](https://yrq110.me/post/front-end/dive-into-playwright/)
*   [ä½¿ç”¨ generic-pool ä¼˜åŒ– puppeteer å¹¶å‘é—®é¢˜](https://blog.guowenfh.com/2019/06/16/2019/puppeteer-pool/)
*   [ç»“åˆé¡¹ç›®æ¥è°ˆè°ˆ Puppeteer](https://juejin.im/post/5d4059305188255d38489a8c)
*   [Puppeteer çˆ¬è™«æ€§èƒ½ä¼˜åŒ–](https://github.com/nfwyst/Blog/issues/14)
*   [äº¬å–œå‰ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•ä¹‹è·¯](https://aotu.io/notes/2020/05/06/jingxi-automated-testing/index.html)
*   [åˆ©ç”¨ cluster ä¼˜åŒ– Puppeteer](https://www.yuque.com/luqixiuzichiji/nodejs/ces)
*   [å¯çˆ±çš„ Puppeteer ä½¿ç”¨å°æŠ€å·§](https://yrq110.me/post/front-end/some-tips-of-using-puppetter/)
*   [puppeteer ä¼˜åŒ–å°æŠ€å·§](https://juejin.im/post/5db97541e51d4529de39f72d)
*   [ä½¿ç”¨ Puppeteer æ­å»ºç»Ÿä¸€æµ·æŠ¥æ¸²æŸ“æœåŠ¡](https://www.infoq.cn/article/dcSBL_9AzCwVPsaQ70dh)

 

å’Œäººå·¥æ™ºèƒ½æœ‰å•¥å…³ç³»...

 

æ‚¨ç”¨ä»€ä¹ˆä»£ç†ï¼Œæœ‰ä»€ä¹ˆç¨³å®šåˆå¥½ç”¨çš„ä»£ç†æ¨èå—

 

Nothing to preview